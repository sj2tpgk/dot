## OnDesktop events {{{
# click on the desktop to get menus
OnDesktop Mouse1 :HideMenus
OnDesktop Mouse2 :WorkspaceMenu
OnDesktop Mouse3 :RootMenu
# }}}
## OnToolbar events {{{
# scroll on the toolbar to change current window
# OnToolbar Mouse4 :PrevWindow {static groups} (iconhidden=no) (workspace=[current])
# OnToolbar Mouse5 :NextWindow {static groups} (iconhidden=no) (workspace=[current])
OnToolbar Mouse4 :PrevWindow
OnToolbar Mouse5 :NextWindow

# middleclick on the toolbar to show root menu
OnToolbar Mouse2 :RootMenu
# }}}

## Moving windows (mouse) {{{
# alt + left click to move/resize a window
OnWindow Mod1 Mouse1 :MacroCmd {Raise} {Focus} {StartMoving}
OnWindowBorder Move1 :StartMoving

# left click on the titlebar to move the window
OnTitlebar Mouse1 :MacroCmd {Raise} {Focus} {ActivateTab}
OnTitlebar Move1  :StartMoving
# }}}
## Resizing windows {{{
# Basic Bindings
Mod1 F9 :Minimize
Mod1 F11 :Fullscreen

# Toggle {max, v-max, h-max, normal}
# F10 :ToggleCmd {Maximize} {MaximizeHorizontal} {MacroCmd {MaximizeHorizontal} {MaximizeVertical}} {MaximizeHorizontal}
# Toggle {max, v-max, normal}
F10 :ToggleCmd {Maximize} {MaximizeHorizontal} {MaximizeVertical}

# Alt + right_click to resize windows
OnWindow Mod1 Mouse3 :MacroCmd {Raise} {Focus} {StartResizing NearestCorner}
OnLeftGrip Move1 :StartResizing bottomleft
OnRightGrip Move1 :StartResizing bottomright

# Maximizing
OnTitlebar     Mouse2        :Maximize
OnWindowBorder Mouse2        :Maximize
OnLeftGrip     Mouse2        :Maximize
OnRightGrip    Mouse2        :Maximize
OnTitlebar     Double Mouse1 :Maximize
OnWindowBorder Double Mouse1 :Maximize
OnLeftGrip     Double Mouse1 :Maximize
OnRightGrip    Double Mouse1 :Maximize
Shift F10 :Maximize

# Do some tiling: split windows vertically
Mod4 1 :Exec sh ~/bin/fluxbox/tilev.sh 24 75
Mod4 2 :Exec sh ~/bin/fluxbox/tilev.sh 36 63
Mod4 3 :Exec sh ~/bin/fluxbox/tilev.sh 42 57
Mod4 0 :Exec sh ~/bin/fluxbox/tilev.sh 49 50
Mod4 4 :Exec sh ~/bin/fluxbox/tilev.sh 57 42
Mod4 5 :Exec sh ~/bin/fluxbox/tilev.sh 63 36
Mod4 6 :Exec sh ~/bin/fluxbox/tilev.sh 75 24

## TODO window resizing
#Mod1 Shift h   :Resize -10 0
#Mod1 Shift o   :Resize 0 10
#Mod1 Shift n   :Resize 0 -10
#Mod1 Shift e   :Resize 0 10
# }}}
## Tabs {{{
# Drag to attatch(dettach) window to(from) tabs
OnTitlebar     Control Mouse1 :StartTabbing
OnWindowBorder Control Mouse1 :StartTabbing
OnLeftGrip     Control Mouse1 :StartTabbing
OnRightGrip    Control Mouse1 :StartTabbing
OnTitlebar     Mouse8         :StartTabbing
OnWindowBorder Mouse8         :StartTabbing
OnLeftGrip     Mouse8         :StartTabbing
OnRightGrip    Mouse8         :StartTabbing

# Cycle through tabs
# Mod1 e :NextTab
# Mod1 q :PrevTab
OnTitlebar Mouse4 :PrevTab
OnTitlebar Mouse5 :NextTab
# if URxvt, cycle through tmux's windows instead of fluxbox tabs.
# Use F4 instead. (F3 is used for other purposes in Minecraft)
# F3            :If {Matches (Name=^urxvt$)} {Exec xdotool keyup F3 && xdotool key alt+W} {NextTab}
# Shift F3      :If {Matches (Name=^urxvt$)} {Exec sleep .09 && xdotool key Ctrl+Y} {PrevTab}
# what if urxvt and other app are tabbed together???
# Mod1 F3           :NextTab # Similar to Mod1+F4, may accidentally close app
# Mod1 Shift F3     :NextTab
# F9 F3          :NextTab
F4             :NextTab
Shift F4       :NextTab
# }}}
## Focus windows {{{
# Right click on the titlebar (or grip or bottom) to lower and focus next window
OnTitlebar     Mouse3 :MacroCmd {Lower} {NextWindow {groups} (workspace=[current]) (title!=.*dash.*)}
OnWindowBorder Mouse3 :MacroCmd {Lower} {NextWindow {groups} (workspace=[current]) (title!=.*dash.*)}
OnLeftGrip     Mouse3 :MacroCmd {Lower} {NextWindow {groups} (workspace=[current]) (title!=.*dash.*)}
OnRightGrip    Mouse3 :MacroCmd {Lower} {NextWindow {groups} (workspace=[current]) (title!=.*dash.*)}
# OnTitlebar Mouse3 :NextWindow {groups} (workspace=[current]) (title!=.*dash.*)

# Alt+Tab equivalents
Mod1 Tab :NextWindow {groups} (workspace=[current]) (title!=.*dash.*)
Mod1 Shift Tab :PrevWindow {groups} (workspace=[current]) (title!=.*dash.*)
Yacute :NextWindow {groups} (workspace=[current])
# alt-tab alternative

# }}}

## Misc {{{
# Swap windows (horizontally)
Mod4 s :Exec sleep .2 && sh ~/bin/fluxbox/movewin.sh -s

# Middle click on the titlebar for a menu of options
OnTitlebar Mouse9 :WindowMenu
OnWindow Mod4 Mouse2 :WindowMenu

# Close winow
Mod1 F4 :Close

# Monitor Off
Mod4 m :Exec sleep .3 && sh ~/bin/mysession monitor

# Toggle window decoration
Mod4 d :ToggleDecor

# Exit fluxbox
Control Mod1 Delete :Exit

# Screenshot
None Print :Exec gnome-screenshot -f "pics/screenshots/ss_$(date +%Y-%m-%d_%H-%M-%S).png"
None Shift Print :Exec gnome-screenshot --window -f "pics/screenshots/ss_$(date +%Y-%m-%d_%H-%M-%S).png"

# Volume control keys
XF86AudioMute         :Exec amixer sset Master toggle
XF86AudioRaiseVolume  :Exec amixer sset Master 5%+
XF86AudioLowerVolume  :Exec amixer sset Master 5%-

# Mocp
F9 u :Exec mocp --toggle-pause

# Brightness
F9 1 :Exec xbacklight -set 1
F9 2 :Exec xbacklight -set 8
F9 3 :Exec xbacklight -set 16
F9 4 :Exec xbacklight -set 24
F9 5 :Exec xbacklight -set 37
F9 6 :Exec xbacklight -set 50
F9 7 :Exec xbacklight -set 70
F9 8 :Exec xbacklight -set 100

# Toggle toolbar
Mod4 t :Exec sh ~/bin/fluxbox/toggletoolbar.sh

# PCSX2 Button
Mod4 l :Exec sleep .5 && xdotool keydown l
# }}}

## Launch apps {{{
# Use vim's :sort in visual mode.
F9 a :Exec ~/bin/launcher almxr
F9 b :Exec ~/bin/rofi/session
F9 c :Exec ~/bin/launcher mocp
F9 d :Exec ~/bin/launcher memo
F9 e :Exec ~/bin/launcher ranger
F9 i :MacroCmd {~/bin/launcher drurxvt -title "FM_for_emacs" -e bash -c "tmux new ranger"}
F9 f :Exec ~/bin/running palemoon && wmctrl -x -a "Pale Moon" || ~/bin/launcher palemoon &
F9 g :Exec geeqie
F9 h :Exec chromium
F9 k :Exec ~/bin/launcher switchkbd
F9 l :Exec ~/bin/running luakit && wmctrl -x -a "luakit" || luakit &
F9 m :Exec ~/bin/launcher mounter
F9 n :Exec ~/bin/launcher nm
F9 o :Exec mousepad
F9 r :Reconfigure
F9 s :Exec ~/bin/running emacs && wmctrl -x -a emacs || ~/bin/launcher emacs &
F9 t :Exec ~/bin/launcher urxvt
F9 v :Exec vivaldi-stable
F9 w :Exec ~/bin/rofi/wallpaper
F9 f :Exec palemoon
F9 i :Exec ~/bin/rofi/fbarngwins
F9 p :Exec ~/bin/launcher xpad
F9 s :Exec ~/bin/launcher emacs

F9 F9 w :Exec ~/bin/rofi/wifi

# Terminal (copy pwd if an urxvt is focused)
Mod1 F1 :If {Matches (Name=^urxvt$)} {Exec sleep .1 && xdotool keyup alt && xdotool key alt+Y} {Exec launcher urxvt}

# Cheat sheet
F9 F1    p :Exec ~/bin/rofi/cheatsheet      ~/bin/rofi/cheat-perl-1liner "Perl5 cheat sheet"
F9 F1 F1 p :Exec emacsclient -a mousepad -c ~/bin/rofi/cheat-perl-1liner
F9 F1    l :Exec ~/bin/rofi/cheatsheet      ~/bin/rofi/cheat-linux "Linux cheat sheet"
F9 F1 F1 l :Exec emacsclient -a mousepad -c ~/bin/rofi/cheat-linux

# Launcher
F9 F4    :Exec ~/bin/launcher rofi1
# }}}
## Workspace {{{
# change to previous/next workspace
# send the current window to previous/next workspace
# take the current window to previous/next workspace with you
Mod1 2        :PrevWorkspace
Mod1 3        :NextWorkspace
# Mod4 2        :SendToPrevWorkspace
# Mod4 3        :SendToNextWorkspace
Mod1 Shift 2          :TakeToPrevWorkspace
Mod1 Shift 3          :TakeToNextWorkspace
Mod4 Mouse5           :TakeToPrevWorkspace
Mod4 Mouse4           :TakeToNextWorkspace
OnWindowBorder Mouse9 :TakeToPrevWorkspace
OnWindowBorder Mouse8 :TakeToNextWorkspace
OnLeftGrip     Mouse9 :TakeToPrevWorkspace
OnLeftGrip     Mouse8 :TakeToNextWorkspace
OnRightGrip    Mouse9 :TakeToPrevWorkspace
OnRightGrip    Mouse8 :TakeToNextWorkspace

# change to workspace k
# Mod1 1 :Workspace 1
# send the current window to a specific workspace
# Mod4 F1 :SendToWorkspace 1
# send the current window and change to a specific workspace
# Control Mod4 F1 :TakeToWorkspace 1

# Change workspace (skipping empty workspaces)
F2        :Exec sh ~/script/changews.sh -ns
Shift F2  :Exec sh ~/script/changews.sh -ps

OnDesktop Mouse5 :Exec sh ~/script/changews.sh -ns   # scroll up
OnDesktop Mouse4 :Exec sh ~/script/changews.sh -ps   # scroll down

OnWindowBorder Mouse5 :Exec sh ~/script/changews.sh -ns
OnWindowBorder Mouse4 :Exec sh ~/script/changews.sh -ps
OnLeftGrip     Mouse5 :Exec sh ~/script/changews.sh -ns
OnLeftGrip     Mouse4 :Exec sh ~/script/changews.sh -ps
OnRightGrip    Mouse5 :Exec sh ~/script/changews.sh -ns
OnRightGrip    Mouse4 :Exec sh ~/script/changews.sh -ps
# }}}

## Garbage {{{
# Double click on the titlebar to shade
# OnTitlebar Double Mouse1 :Shade

# Switch to specific app
# F2        :NextWindow {groups} (workspace=[current]) (title!=.*dash.*)
# (Name=urxvt) (Role=browser)

# Mod4 t :ToggleCmd {MacroCmd {SetResourceValue session.screen0.toolbar.visible false} {Reconfigure}} {MacroCmd {SetResourceValue session.screen0.toolbar.visible true} {Reconfigure}}
# Mod4 t :Exec {grep "toolbar.visible:.*true" ~/.fluxbox/init && fluxbox-remote MacroCmd {SetResourceValue session.screen0.toolbar.visible false} {Reconfigure}}
# Mod4 t :Exec fluxbox-remote 'MacroCmd {SetResourceValue session.screen0.toolbar.visible false} {Reconfigure}'
# MacroCmd {SetResourceValue session.screen0.toolbar.visible false} {Reconfigure}'
# || fluxbox-remote "MacroCmd {SetResourceValue session.screen0.toolbar.visible true} {Reconfigure}"}
# }}}

# vim:fdm=marker:ft=fbkeys:cms=#%s
