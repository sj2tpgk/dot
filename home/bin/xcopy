#!/bin/sh

text=$1

if command -v xclip >/dev/null; then # xorg
    if [ -z "$text" ]; then
        xclip -selection clipboard -i
    else
        echo "$text" | xclip -selection clipboard -i
    fi

elif command -v clip.exe > /dev/null; then # wsl
    # & is necessary because operations are slow
    if [ -z "$text" ]; then
        # perl -pe 'chomp if eof' 2>/dev/null | iconv -f utf-8 -t shift-jis -c | clip.exe &
        perl -pe 'chomp if eof' 2>/dev/null | clip.exe &
    else
        # echo "$text" | perl -pe 'chomp if eof' 2>/dev/null | iconv -f utf-8 -t shift-jis -c | clip.exe &
        echo "$text" | perl -pe 'chomp if eof' 2>/dev/null | clip.exe &
    fi

fi

